<!DOCTYPE html>  
<html>  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">  
    <title>H5æ¨ªå±ç­¾å</title>  
    <style>  
        body {  
            margin: 0;  
            padding: 0;  
            height: 100vh;  
            display: flex;  
            flex-direction: column;  
            justify-content: center;  
            align-items: center;  
            background: #f0f0f0;  
            touch-action: none;  
        }  

        #signature-container {  
            width: 90vw;  
            height: 60vh;  
            background: white;  
            border: 2px solid #ddd;  
            margin-bottom: 20px;  
            position: relative;  
        }  

        #canvas {  
            width: 100%;  
            height: 100%;  
            display: block;  
        }  

        .btn-group {  
            display: flex;  
            gap: 10px;  
        }  

        button {  
            padding: 10px 20px;  
            background: #4CAF50;  
            color: white;  
            border: none;  
            border-radius: 4px;  
            cursor: pointer;  
        }  

        button#clear {  
            background: #f44336;  
        }  

        /* ç«–å±æç¤ºæ ·å¼ */
        .portrait-alert {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 100;
            color: white;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .portrait-alert img {
            width: 80px;
            margin-bottom: 20px;
        }
        
        .portrait-alert h2 {
            margin: 0 0 15px 0;
        }
        
        .portrait-alert p {
            margin: 0 0 20px 0;
            font-size: 16px;
        }
        
        /* ç«–å±æ—¶éšè—ä¸»å†…å®¹ï¼Œæ˜¾ç¤ºæç¤º */
        @media screen and (orientation: portrait) {  
            #signature-container, .btn-group {  
                display: none;  
            }  
            .portrait-alert {
                display: flex;
            }
        }  
    </style>  
</head>  
<body>  

    <!-- ç«–å±æç¤ºå¼¹çª— -->
    <div class="portrait-alert">
      <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0id2hpdGUiIGQ9Ik03LDEwSDE3QTEsMSAwIDAsMSAxNywxMkExLDEgMCAwLDEgMTcsMTRIN0ExLDEgMCAwLDEgNywxMkExLDEgMCAwLDEgNywxME0xOC41LDVINy41QTYuNSw2LjUgMCAwLDAsMSwxMS41VjE5QTIsMiAwIDAsMCAzLDIxSDIxQTIsMiAwIDAsMCAyMywxOVYxMS41QTYuNSw2LjUgMCAwLDAgMTguNSw1TTMsMTlWMTEuNUMzLDguNDMgNS40Myw2IDcuNSw2SDE4LjVDMjAuNTcsNiAyMyw4LjQzIDIzLDExLjVWMTlIMyIvPjwvc3ZnPg==" alt="æ—‹è½¬æç¤º">
      <h2>è¯·å°†æ‰‹æœºæ¨ªå±ä½¿ç”¨</h2>
      <p>ä¸ºäº†è·å¾—æœ€ä½³ä½“éªŒï¼Œè¯·å°†æ‚¨çš„è®¾å¤‡æ—‹è½¬è‡³æ¨ªå‘æ¨¡å¼</p>
      <p>ğŸ”„ æ—‹è½¬æ‰‹æœºåé¡µé¢å°†è‡ªåŠ¨åˆ·æ–°</p>
    </div>

    <div id="signature-container">  
        <canvas id="canvas"></canvas>  
    </div>  
    <div class="btn-group">  
        <button id="save">ä¿å­˜ç­¾å</button>  
        <button id="clear">æ¸…ç©º</button>  
    </div>  

    <script>  
        // åˆå§‹åŒ–Canvas  
        const canvas = document.getElementById('canvas');  
        const ctx = canvas.getContext('2d');  
        let isDrawing = false;  
        let startX, startY;  

        // è·å–Canvasç›¸å¯¹äºè§†å£çš„ä½ç½®ï¼Œç”¨äºä¿®æ­£è§¦æ‘¸åæ ‡ã€‚
        function getCanvasPosition() {
            const rect = canvas.getBoundingClientRect();
            return {
                left: rect.left,
                top: rect.top
            };
        }

        // åˆå§‹åŒ–Canvaså°ºå¯¸
        function initCanvasSize() {
            const container = canvas.parentElement;
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            
            // è®¾ç½®æ›´å¹³æ»‘çš„çº¿æ¡
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.strokeStyle = '#000';
        }

        // è§¦æ‘¸å¼€å§‹äº‹ä»¶  
        canvas.addEventListener('touchstart', (e) => {  
            e.preventDefault();  
            const touch = e.touches[0];  
            // è·å–è§¦æ‘¸ç‚¹ç›¸å¯¹äºCanvasçš„åæ ‡
            const pos = getCanvasPosition();
            startX = touch.clientX - pos.left;  
            startY = touch.clientY - pos.top;  
            isDrawing = true;  
            
            // å¼€å§‹æ–°çš„è·¯å¾„
            ctx.beginPath();
            ctx.moveTo(startX, startY);
        });  

        // è§¦æ‘¸ç§»åŠ¨äº‹ä»¶ï¼ˆç»˜åˆ¶çº¿æ¡ï¼‰  
        canvas.addEventListener('touchmove', (e) => {  
            if (!isDrawing) return;  
            e.preventDefault();  
            const touch = e.touches[0];  
            const pos = getCanvasPosition();
            const currentX = touch.clientX - pos.left;  
            const currentY = touch.clientY - pos.top;  
            
            // ç»˜åˆ¶çº¿æ¡
            ctx.lineTo(currentX, currentY);
            ctx.stroke();
            
            startX = currentX;  
            startY = currentY;  
        });  

        // è§¦æ‘¸ç»“æŸäº‹ä»¶  
        canvas.addEventListener('touchend', () => {  
            isDrawing = false;  
            ctx.closePath();
        });  

        // æ¸…ç©ºç­¾å  
        document.getElementById('clear').addEventListener('click', () => {  
            ctx.clearRect(0, 0, canvas.width, canvas.height);  
        });  

        // ä¿å­˜ç­¾åä¸ºå›¾ç‰‡ï¼ˆBase64æ ¼å¼ï¼‰  
        document.getElementById('save').addEventListener('click', () => {  
            const imgData = canvas.toDataURL('image/png');  
            // æ­¤å¤„å¯å°†imgDataå‘é€è‡³åç«¯ï¼Œæˆ–åˆ›å»ºä¸‹è½½é“¾æ¥  
            const link = document.createElement('a');  
            link.href = imgData;  
            link.download = `signature_${Date.now()}.png`;  
            link.click();  
        });  

        // é€‚é…æ¨ªå±æ—¶Canvaså°ºå¯¸ï¼ˆçª—å£å˜åŒ–æ—¶æ›´æ–°ï¼‰  
        window.addEventListener('resize', initCanvasSize);  
        
        // åˆå§‹åŒ–Canvas
        initCanvasSize();
    </script>  
</body>  
</html>